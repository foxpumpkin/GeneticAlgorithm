\hypertarget{class_session_1_1_http_get_sequence}{}\section{Session\+::Http\+Get\+Sequence Class Reference}
\label{class_session_1_1_http_get_sequence}\index{Session::HttpGetSequence@{Session::HttpGetSequence}}


実際に\+Httpのシーケンスを処理する内部クラス  


\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_af6396426c0d4e6a8eb8de9744c94c182}\label{class_session_1_1_http_get_sequence_af6396426c0d4e6a8eb8de9744c94c182}} 
\mbox{\hyperlink{class_session_1_1_http_get_sequence_af6396426c0d4e6a8eb8de9744c94c182}{Http\+Get\+Sequence}} (uint32\+\_\+t \mbox{\hyperlink{class_session_1_1_http_get_sequence_a3b3a0b3b9aee4a74cef8eccdcf5bffb0}{id}}, boost\+::asio\+::io\+\_\+service $\ast$io, shared\+\_\+ptr$<$ tcp\+::socket $>$ \mbox{\hyperlink{class_session_1_1_http_get_sequence_a306d423aa5fea9785ae8e7f31db0eb73}{socket}})
\begin{DoxyCompactList}\small\item\em 処理なし \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_aae42e22aa43fdf4b3e468d5b65319020}\label{class_session_1_1_http_get_sequence_aae42e22aa43fdf4b3e468d5b65319020}} 
\mbox{\hyperlink{class_session_1_1_http_get_sequence_aae42e22aa43fdf4b3e468d5b65319020}{$\sim$\+Http\+Get\+Sequence}} ()
\begin{DoxyCompactList}\small\item\em 処理なし \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_log_queue}{Log\+Queue}} \mbox{\hyperlink{class_session_1_1_http_get_sequence_a1a90982bc3eaf7332de708f9e7a5e260}{run}} ()
\begin{DoxyCompactList}\small\item\em 実際に\+Httpのシーケンスを処理する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a965ad56f58d8f766ee0dc190ddda2dd5}\label{class_session_1_1_http_get_sequence_a965ad56f58d8f766ee0dc190ddda2dd5}} 
\mbox{\hyperlink{class_log_queue}{Log\+Queue}} \mbox{\hyperlink{class_session_1_1_http_get_sequence_a965ad56f58d8f766ee0dc190ddda2dd5}{run}} (const string \&\mbox{\hyperlink{class_session_1_1_http_get_sequence_a7d3da13220f1cb852254aedf19cfd356}{dst}}, const string \&\mbox{\hyperlink{class_session_1_1_http_get_sequence_ad9340442fa9af61603ed99d81a601a96}{path}})
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_session_1_1_http_get_sequence_a7cba3115e60210a60413dd47d87ea767}{set\+Destination()}}、set\+Path()、run()の順にコールする \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a120d1662da3c177b1a2351b3bbf9192b}\label{class_session_1_1_http_get_sequence_a120d1662da3c177b1a2351b3bbf9192b}} 
bool \mbox{\hyperlink{class_session_1_1_http_get_sequence_a120d1662da3c177b1a2351b3bbf9192b}{is\+Run}} ()
\begin{DoxyCompactList}\small\item\em Session\+::\+Http\+Get\+Sequence\+::is\+\_\+runを返す（未使用） \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a7cba3115e60210a60413dd47d87ea767}\label{class_session_1_1_http_get_sequence_a7cba3115e60210a60413dd47d87ea767}} 
void \mbox{\hyperlink{class_session_1_1_http_get_sequence_a7cba3115e60210a60413dd47d87ea767}{set\+Destination}} (const string \&\mbox{\hyperlink{class_session_1_1_http_get_sequence_a7d3da13220f1cb852254aedf19cfd356}{dst}})
\begin{DoxyCompactList}\small\item\em 宛先サーバを格納し、make\+Request()をコールする \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a4afb2f4e6454d8b3d2a59444e192a948}\label{class_session_1_1_http_get_sequence_a4afb2f4e6454d8b3d2a59444e192a948}} 
void \mbox{\hyperlink{class_session_1_1_http_get_sequence_a4afb2f4e6454d8b3d2a59444e192a948}{set\+Path}} (const string \&\mbox{\hyperlink{class_session_1_1_http_get_sequence_ad9340442fa9af61603ed99d81a601a96}{path}})
\begin{DoxyCompactList}\small\item\em ダウンロードパスを格納し、make\+Request()をコールする \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_session_1_1_http_get_sequence_aa2af851135d98396c135edac23f9a4a0}{make\+Request}} ()
\begin{DoxyCompactList}\small\item\em Http Requestを生成する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_ab79d4fbfab721aabfdf3903ae6f5a577}\label{class_session_1_1_http_get_sequence_ab79d4fbfab721aabfdf3903ae6f5a577}} 
void \mbox{\hyperlink{class_session_1_1_http_get_sequence_ab79d4fbfab721aabfdf3903ae6f5a577}{close\+Socket}} ()
\begin{DoxyCompactList}\small\item\em shutdownとcloseをコールする \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a7d3da13220f1cb852254aedf19cfd356}\label{class_session_1_1_http_get_sequence_a7d3da13220f1cb852254aedf19cfd356}} 
string \mbox{\hyperlink{class_session_1_1_http_get_sequence_a7d3da13220f1cb852254aedf19cfd356}{dst}}
\begin{DoxyCompactList}\small\item\em 宛先サーバへのアドレスを格納する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_ad9340442fa9af61603ed99d81a601a96}\label{class_session_1_1_http_get_sequence_ad9340442fa9af61603ed99d81a601a96}} 
string \mbox{\hyperlink{class_session_1_1_http_get_sequence_ad9340442fa9af61603ed99d81a601a96}{path}}
\begin{DoxyCompactList}\small\item\em ダウンロードパスを格納する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a8837d7849dfc1c24fe4c139650e18fb9}\label{class_session_1_1_http_get_sequence_a8837d7849dfc1c24fe4c139650e18fb9}} 
boost\+::asio\+::io\+\_\+service $\ast$ \mbox{\hyperlink{class_session_1_1_http_get_sequence_a8837d7849dfc1c24fe4c139650e18fb9}{io\+\_\+service}}
\begin{DoxyCompactList}\small\item\em socketに対応したio\+\_\+serviceへのアドレスを格納する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a306d423aa5fea9785ae8e7f31db0eb73}\label{class_session_1_1_http_get_sequence_a306d423aa5fea9785ae8e7f31db0eb73}} 
shared\+\_\+ptr$<$ tcp\+::socket $>$ \mbox{\hyperlink{class_session_1_1_http_get_sequence_a306d423aa5fea9785ae8e7f31db0eb73}{socket}}
\begin{DoxyCompactList}\small\item\em socketのshared\+\_\+ptrを格納する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a3ce12aa9298adc25900145fe16e874da}\label{class_session_1_1_http_get_sequence_a3ce12aa9298adc25900145fe16e874da}} 
bool \mbox{\hyperlink{class_session_1_1_http_get_sequence_a3ce12aa9298adc25900145fe16e874da}{is\+\_\+run}}
\begin{DoxyCompactList}\small\item\em 実行中か否かを格納する（未使用） \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a3b3a0b3b9aee4a74cef8eccdcf5bffb0}\label{class_session_1_1_http_get_sequence_a3b3a0b3b9aee4a74cef8eccdcf5bffb0}} 
uint32\+\_\+t \mbox{\hyperlink{class_session_1_1_http_get_sequence_a3b3a0b3b9aee4a74cef8eccdcf5bffb0}{id}}
\begin{DoxyCompactList}\small\item\em スレッドに割り当てた\+I\+Dを格納する \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_a1354b58ca82453160fc4055fd1521bfb}\label{class_session_1_1_http_get_sequence_a1354b58ca82453160fc4055fd1521bfb}} 
boost\+::asio\+::streambuf \mbox{\hyperlink{class_session_1_1_http_get_sequence_a1354b58ca82453160fc4055fd1521bfb}{request}}
\begin{DoxyCompactList}\small\item\em Http Requestを格納する \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
実際に\+Httpのシーケンスを処理する内部クラス 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_session_1_1_http_get_sequence_aa2af851135d98396c135edac23f9a4a0}\label{class_session_1_1_http_get_sequence_aa2af851135d98396c135edac23f9a4a0}} 
\index{Session::HttpGetSequence@{Session::HttpGetSequence}!makeRequest@{makeRequest}}
\index{makeRequest@{makeRequest}!Session::HttpGetSequence@{Session::HttpGetSequence}}
\subsubsection{\texorpdfstring{makeRequest()}{makeRequest()}}
{\footnotesize\ttfamily void Session\+::\+Http\+Get\+Sequence\+::make\+Request (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Http Requestを生成する 

writeするとstreamが消費されるため、都度コールしなければならない \mbox{\Hypertarget{class_session_1_1_http_get_sequence_a1a90982bc3eaf7332de708f9e7a5e260}\label{class_session_1_1_http_get_sequence_a1a90982bc3eaf7332de708f9e7a5e260}} 
\index{Session::HttpGetSequence@{Session::HttpGetSequence}!run@{run}}
\index{run@{run}!Session::HttpGetSequence@{Session::HttpGetSequence}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_log_queue}{Log\+Queue}} Session\+::\+Http\+Get\+Sequence\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



実際に\+Httpのシーケンスを処理する 

接続を試みる。接続に失敗した場合はinterrupted\+\_\+sendを\+Logに記録し、キューを返す。

Http get requestを送出する。失敗した場合はinterrupted\+\_\+sendを\+Logに記録し、キューを返す。

Http get responseを受信する。失敗した場合はinterrupted\+\_\+readを\+Logに記録し、キューを返す。

受信した\+Http get responseを確認する。 streamが以上、または\+H\+T\+T\+P以外が返った場合はinvalid\+\_\+responseを\+Logに記録し、キューを返す。

受信した\+Http get responseからステータスコードを確認のうえ\+Logに記録し、ソケットを閉じてキューを返す。 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/session.\+hpp\item 
src/session.\+cpp\end{DoxyCompactItemize}
